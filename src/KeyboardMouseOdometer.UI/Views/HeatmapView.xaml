<UserControl x:Class="KeyboardMouseOdometer.UI.Views.HeatmapView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="clr-namespace:KeyboardMouseOdometer.UI.Controls"
             xmlns:vm="clr-namespace:KeyboardMouseOdometer.UI.ViewModels"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="1000"
             d:DataContext="{d:DesignInstance Type=vm:HeatmapViewModel}">
    
    <Grid Background="#FF1E1E1E">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Time range selector -->
        <Border Grid.Row="0" Background="#FF2D2D30" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Title -->
                <TextBlock Grid.Column="0" Text="Keyboard Heatmap" 
                           Foreground="White" FontSize="16" FontWeight="Bold" 
                           VerticalAlignment="Center" Margin="0,0,20,0"/>
                
                <!-- Time range buttons -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <RadioButton x:Name="TodayRadio" Content="Today" 
                                 IsChecked="{Binding Path=SelectedTimeRange, 
                                             Converter={StaticResource EnumBooleanConverter}, 
                                             ConverterParameter=Today}"
                                 Style="{StaticResource TimeRangeRadioButton}"
                                 Command="{Binding ChangeTimeRangeCommand}"
                                 CommandParameter="{x:Static vm:HeatmapTimeRange.Today}"/>
                    
                    <RadioButton x:Name="WeekRadio" Content="This Week" 
                                 IsChecked="{Binding Path=SelectedTimeRange, 
                                             Converter={StaticResource EnumBooleanConverter}, 
                                             ConverterParameter=Week}"
                                 Style="{StaticResource TimeRangeRadioButton}"
                                 Command="{Binding ChangeTimeRangeCommand}"
                                 CommandParameter="{x:Static vm:HeatmapTimeRange.Week}"/>
                    
                    <RadioButton x:Name="MonthRadio" Content="This Month" 
                                 IsChecked="{Binding Path=SelectedTimeRange, 
                                             Converter={StaticResource EnumBooleanConverter}, 
                                             ConverterParameter=Month}"
                                 Style="{StaticResource TimeRangeRadioButton}"
                                 Command="{Binding ChangeTimeRangeCommand}"
                                 CommandParameter="{x:Static vm:HeatmapTimeRange.Month}"/>
                    
                    <RadioButton x:Name="LifetimeRadio" Content="Lifetime" 
                                 IsChecked="{Binding Path=SelectedTimeRange, 
                                             Converter={StaticResource EnumBooleanConverter}, 
                                             ConverterParameter=Lifetime}"
                                 Style="{StaticResource TimeRangeRadioButton}"
                                 Command="{Binding ChangeTimeRangeCommand}"
                                 CommandParameter="{x:Static vm:HeatmapTimeRange.Lifetime}"/>
                </StackPanel>
                
                <!-- Refresh button -->
                <Button Grid.Column="2" Content="â†» Refresh" 
                        Command="{Binding RefreshCommand}"
                        Style="{StaticResource ModernButton}"
                        Padding="10,5" Margin="5,0,0,0"/>
            </Grid>
        </Border>
        
        <!-- Heatmap control -->
        <controls:KeyboardHeatmapControl Grid.Row="1" 
                                          KeyboardLayout="{Binding KeyboardLayout}"
                                          DataContext="{Binding}"/>
        
        <!-- Loading overlay -->
        <Border Grid.Row="1" Background="#CC000000" 
                Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="4" Foreground="#FF007ACC"/>
                <TextBlock Text="Loading heatmap data..." Foreground="White" Margin="0,10,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>